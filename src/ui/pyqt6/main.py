#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
EasyKiConverter PyQt6 UI - ä¸»ç¨‹åºå…¥å£
åŸºäºPyQt6çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç”¨äºå°†å˜‰ç«‹åˆ›EDAå…ƒå™¨ä»¶è½¬æ¢ä¸ºKiCadæ ¼å¼
"""
import sys
from pathlib import Path
# ç¡®ä¿å¯ä»¥å¯¼å…¥åŒçº§æ¨¡å—
sys.path.insert(0, str(Path(__file__).parent))
sys.path.insert(0, str(Path(__file__).parent.parent))
sys.path.insert(0, str(Path(__file__).parent.parent.parent))

import traceback
from PyQt6.QtWidgets import QApplication
from ultimate_main_window import UltimateMainWindow
from utils.config_manager import ConfigManager

def main():
    """ä¸»å‡½æ•°"""
    print("ğŸš€ æ­£åœ¨å¯åŠ¨ EasyKiConverter PyQt6 UI...")
    
    # åˆ›å»ºQApplicationå®ä¾‹
    app = QApplication(sys.argv)
    print("âœ… QApplication åˆ›å»ºæˆåŠŸ")
    
    # è®¾ç½®åº”ç”¨ç¨‹åºå±æ€§ï¼ˆå¿…é¡»åœ¨åˆ›å»ºQApplicationåï¼‰
    app.setApplicationName("EasyKiConverter")
    app.setApplicationVersion("2.0.0")
    app.setOrganizationName("EasyKiConverter")
    app.setOrganizationDomain("easykiconverter.com")
    
    # è®¾ç½®åº”ç”¨ç¨‹åºæ ·å¼
    app.setStyle("Fusion")
    print("âœ… åº”ç”¨ç¨‹åºå±æ€§è®¾ç½®å®Œæˆ")
    
    try:
        # åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨
        print("ğŸ“‹ æ­£åœ¨åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨...")
        config_manager = ConfigManager()
        print("âœ… é…ç½®ç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ")
        
        # åˆ›å»ºå¹¶æ˜¾ç¤ºä¸»çª—å£ï¼ˆä½¿ç”¨ä¼˜åŒ–åçš„ç•Œé¢ï¼‰
        print("ğŸ—ï¸ æ­£åœ¨åˆ›å»ºä¸»çª—å£...")
        main_window = UltimateMainWindow(config_manager)
        print("âœ… ä¸»çª—å£åˆ›å»ºæˆåŠŸ")
        
        main_window.show()

        
        # è¿è¡Œåº”ç”¨ç¨‹åºäº‹ä»¶å¾ªç¯
        return app.exec()
        
    except Exception as e:
        print(f"âŒ åº”ç”¨ç¨‹åºå¯åŠ¨å¤±è´¥: {e}")
        traceback.print_exc()
        return 1


if __name__ == "__main__":
    sys.exit(main())